# 项目清理指南

在代码迁移完成后，项目中存在一些冗余文件和目录。这些文件在新的项目结构中不再需要，可以安全地移除或备份。本指南将帮助您理解并执行清理过程。

## 为什么需要清理

在将旧代码迁移到新的模块化结构后，保留了许多原始文件作为参考。现在迁移工作已经完成，这些文件可以被清理，以便：

1. 减少项目大小
2. 避免混淆（防止使用旧版本的代码）
3. 提高项目的可维护性
4. 减少潜在的命名冲突

## 已识别的冗余文件

以下是已识别的冗余文件和目录：

### 主要冗余文件

- **backup/** - 原始代码的备份目录
- **core/** - 旧的核心代码目录，功能已迁移到新结构
- **yeast_cell/** - 旧的项目目录
- **utils/image_processing/** - 旧的图像处理工具，已迁移到 `celldetection/enhance/`
- **runs_backup/** - 旧的运行记录备份
- **simple_cell_weights/** - 旧的模型权重目录

### 旧的脚本文件

- **trainer.py** - 已被 `celldetection/train.py` 替代
- **inference.py** - 已被 `celldetection/detect.py` 替代
- **train_cell.py** - 已被 `celldetection/train.py` 替代

### 临时文件

- **__pycache__/** - Python缓存文件

### 可能需要手动确认的文件

- **cell_detection_results/** - 可能包含重要的检测结果
- **manage_data.py** - 数据管理脚本，如果功能已迁移则可清理

## 如何使用清理脚本

我们提供了一个Python脚本 `cleanup.py` 来帮助您清理这些冗余文件。该脚本支持三种模式：

1. **演示模式** - 只显示将要移动/删除的文件，不实际执行
2. **备份模式** - 将文件移动到备份目录，而不是直接删除
3. **删除模式** - 直接删除文件（谨慎使用！）

### 演示模式（推荐先运行）

```bash
python cleanup.py --dry-run
```

这将显示将要移动或删除的文件，但不会实际执行任何操作。

### 备份模式（默认）

```bash
python cleanup.py
```

或指定自定义备份目录：

```bash
python cleanup.py --backup-dir my_backup_folder
```

文件将被移动到时间戳命名的备份目录中，例如：`redundant_backup_20230412_120000/`

### 删除模式（谨慎使用！）

```bash
python cleanup.py --delete
```

**注意：** 此操作将直接删除文件，无法恢复！建议先使用备份模式。

## 手动清理

对于脚本中未包含的文件，或者您希望单独确认的文件，建议手动检查并移动/删除。

## 恢复备份

如果您需要恢复已备份的文件，只需从备份目录中复制回来即可：

```bash
# 示例：恢复备份目录中的文件
cp -r redundant_backup_TIMESTAMP/path/to/file ./path/to/file
```

## 注意事项

1. 清理前请确保所有代码已正确迁移并能正常工作
2. 建议先进行完整的代码测试，确认新结构能够满足所有功能需求
3. 对于不确定是否需要的文件，建议先备份而不是直接删除 